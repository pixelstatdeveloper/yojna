{% extends 'web/layout.html' %} {% load static %} {% load ui_tags %} {% block title %}Scheme Registration{% endblock %}
{% block description %} {% settings_value 'APP_NAME' %} {% endblock %} {% block keywords %} {% settings_value 'APP_NAME'
%} {% endblock %}
{% block css %}
<style>
    #prefilled {
        display: flex;
        align-items: center;
        gap: .8em;
    }

    #bany_heading {
        color: #3f42a1;
        font-size: 25px;
        margin-bottom: 20px;
    }

    .space {height: 2px; margin: 30px 0; border-bottom: 3px dashed #c9c7c7;}
</style>
{% endblock %}
{% block pre_load_js %} {% endblock %} {% block body %}

<div class="fables-light-background-color">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="fables-breadcrumb breadcrumb px-0 py-3">
                <li class="breadcrumb-item">
                    <a href="{% url 'web:home' %}" class="fables-second-text-color">शासकीय योजना </a>
                </li>
                <li class="breadcrumb-item active" aria-current="page"
                    style="font-family: 'Arya', sans-serif!important;">योजनेचा अर्ज</li>
            </ol>
        </nav>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="row">
                  <div class="col-md-12">
                  <h2 class="fables-second-text-color mt-3 font-30 font-weight-bold" id="bany_heading">अर्जदाराची माहिती</h2>
                </div>
                <style>
                    .main_profile {
                        font-family: 'Arya', sans-serif !important;
                        font-size: 14px;
                        font-weight: 500;
                    }
                    .main_profile_sub {
                        background-color: #f1f1f1;
                        padding: 15px;
                    }
                    .main_profile_sub img {
                        width: 200px;
                        height: 200px;
                        border-radius: 100%;
                        border: 5px solid #e8e4e4;
                    }
                    .main_profile_sub1 {
                        padding-top: 15px;
                    }
                    .main_profile_sub ul {
                        padding-left: 0px;
                    }
                    .main_profile_sub ul li {
                        background-color: #fff;
                        margin: 10px;
                        padding: 7px;
                    }
                    
                    .main_profile_sub_9{padding:20px;}
                    .main_profile_sub table .yognaname{font-size: 16px;}
                    .main_profile_sub table .yognaname1{font-size: 16px; color:#b00505;}
                    .main_profile_sub_9 table{margin:0;}
                    .form-control {font-size:12px!important;padding:7px;}
                    .py-3{padding:6px;}
                </style>
                <div class="col-md-3 main_profile">
                    <div class="main_profile_sub">
                        <center><img src="
                        {% if request.user.profile_pic %}
                            /media/{{ request.user.profile_pic}}
                        {%else%}
                        https://pixabay.com/images/download/avatar-1577909_640.png
                        {% endif %}
                            " class="img-responsive" alt="Profile_User" srcset="" /></center>
                        <div class="main_profile_sub1">
                            <ul>
                                <li><i class="bi bi-person"></i><svg xmlns="http://www.w3.org/2000/svg" width="15"
                                        height="15" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                        <path
                                            d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" />
                                    </svg> {{ request.user.name }}</li>
                                <li><i class="bi bi-gender-ambiguous"></i><svg xmlns="http://www.w3.org/2000/svg"
                                        width="20" height="20" fill="currentColor" class="bi bi-gender-ambiguous"
                                        viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                            d="M11.5 1a.5.5 0 0 1 0-1h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V1.707l-3.45 3.45A4 4 0 0 1 8.5 10.97V13H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V14H6a.5.5 0 0 1 0-1h1.5v-2.03a4 4 0 1 1 3.471-6.648L14.293 1H11.5zm-.997 4.346a3 3 0 1 0-5.006 3.309 3 3 0 0 0 5.006-3.31z" />
                                    </svg> {{ request.user.Gender }}</li>
                                <li><i class="bi bi-people"></i><svg xmlns="http://www.w3.org/2000/svg" width="20"
                                        height="20" fill="currentColor" class="bi bi-people" viewBox="0 0 16 16">
                                        <path
                                            d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" />
                                    </svg> {{ request.user.caste }}</li>
                                <li><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-envelope" viewBox="0 0 16 16">
                                        <path
                                            d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z" />
                                    </svg> {{request.user.email}}</li>
                                <li><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-phone" viewBox="0 0 16 16">
                                        <path
                                            d="M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h6zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H5z" />
                                        <path d="M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                                    </svg> {{request.user.mobile_number}}</li>
                                <li><i class="fa fa-id-card" aria-hidden="true"></i> {{request.user.adhaar_no}}</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="main_profile_sub main_profile_sub_9">
                        <div id="prefilled">
                            <table class="table table-bordered main_bany_text">
                                <tbody>
                                    <tr>
                                        <td><b class="yognaname">विभागाचे नाव :</b></td>
                                        <td class="fables-second-text-color mt-3 font-30 font-weight-bold main_bany_text"
                                        ><b class="yognaname1">{{scheme.department.name }}</b></td>
                                    </tr>
                                    <tr>
                                        <td><b class="yognaname">योजनेचे नाव :</b></td>
                                        <td class="fables-second-text-color mt-3 font-30 font-weight-bold main_bany_text"
                                        ><b class="yognaname1">{{ scheme.name}}</b></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="space"></div>
                    <div class="main_profile_sub" id="application_form_wrapper" style="padding:20px;">
                        <h2 class="fables-second-text-color mt-3 font-25 font-weight-bold" id="bany_heading" style="color:#3F42A1; font-size: 25px;">
                            योजनेचा अर्ज / Application Form </h2>
                        <div class="main_bany_text">                            
                                {% with 'forms/'|add:scheme.name|add:'.html' as form_template %}
                                {% if form_template|template_exists %}
                                {% include form_template %}
                                {% else %}
                                {%if scheme.url %}

                            <form method="POST" enctype="multipart/form-data" id="kagadpatre" onsubmit="myButton.disabled = true; return true;"
                                action="{% url 'web:scheme_registration' scheme.id %}">

                            <table class="table-bordered table main_bany_text">
                                <tbody>
                                    <tr>
                                        <td>
                                            <h5>या योजनेचा अर्ज संबंधित विभागाच्या सांकेतिक स्थळावर उपलब्ध आहे. </h5>
                                        </td>
                                        <td><a href="{{scheme.url}}" target="_blank">{{scheme.url}}</a></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h5> ऑनलाईन अर्ज केल्यानंतर तुमच्या अर्जाचा मागोवा घेण्यासाठी Application ID प्रविष्ट करा </h5>
                                        </td>
                                        <td><input name="app_id" type="text"></td>
                                    </tr>                            
                                    {%endif%}
                                    {% endif %} 
                                </tbody>                        
                            </table>                    
                        </div>
                    </div> 
                    <div class="space"></div>
                    <form method="POST" enctype="multipart/form-data" id="kagadpatre" onsubmit="myButton.disabled = true; return true;"
                        action="{% url 'web:scheme_registration' scheme.id %}">
                        {% if not scheme.url %}
                        <div class="row form-group p-0">
                            {% if form_template|template_exists %}
                            <div class="col-md-12" style="background-color:#afacac; padding:40px 10px;" hidden>
                                <div class="row">
                                    <span class="fs-1 text-danger text-center" style="font-size:22px!important;margin-bottom:20px;font-weight:600;font-family: 'Arya', sans-serif!important;">
                                 वरील अर्ज भरा अथवा प्रिंट केलेला अर्ज खाली जोडा ( कृपया कोणताही एक पर्याय निवडा ) </span>
                                    {%endif%}
                                    <div class="form-group d-flex align-items-center">
                                        <div class="col-md-3">
                                    <label for="scanned_form" style="font-weight:600;font-family: 'Arya', sans-serif!important;" >योजनेचा अर्ज जोडा</label> 
                                    </div>
                                    <div class="col-md-6">
                                    <input type="file" name="arza" id="scanned_form" class="form-control"/>
                                    </div>
                                    <div class="col-md-3">
                                    <a href="/media/{{scheme.sample}}" class="btn btn-primary" style="font-weight:600;font-family: 'Arya', sans-serif!important;" target="_blank">अर्जाचा
                                        नमुना</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {%endif%}
                            {% endwith %}
                            {% if not registration_media %}
                        <div class="main_profile_sub main_profile_sub_9" hidden >
                            <h2 class="fables-second-text-color mt-3 font-30 font-weight-bold" id="bany_heading">
                                योजनेची कागदपत्रे
                            </h2>
                            <table class="table table-bordered table-striped table-hover main_bany_text" >
                                <thead>
                                    <tr style="font-size:16px;">
                                        <th scope="col">कागदपत्रांची नावे </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% csrf_token %}
                                    {% for value in registration_media %}
                                    <tr>
                                        <td>
                                            <label name="{{value.name}}" value="{{value.name}}">{{value.name}}</label>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                       </div>  
                       {% elif scheme.url %}
                        <div class="main_profile_sub main_profile_sub_9"  >
                            <h2 class="fables-second-text-color mt-3 font-30 font-weight-bold" id="bany_heading">
                                योजनेची कागदपत्रे
                            </h2>
                            <table class="table table-bordered table-striped table-hover main_bany_text" >
                                <thead>
                                    <tr style="font-size:16px;">
                                        <th scope="col">कागदपत्रांची नावे </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% csrf_token %}
                                    {% for value in registration_media %}
                                    <tr>
                                        <td>
                                            <label name="{{value.name}}" value="{{value.name}}">{{value.name}}</label>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                       </div>    
                            {%else%}
                            <div class="main_profile_sub main_profile_sub_9">
                                <h2 class="fables-second-text-color mt-3 font-30 font-weight-bold" id="bany_heading">
                                    योजनेची कागदपत्रे
                                </h2>
                            <table class="table table-bordered table-striped table-hover main_bany_text">
                                <thead>
                                    <tr style="font-size:16px;">
                                        <th scope="col">कागदपत्रांची नावे </th>
                                        <th scope="col">कागदपत्रे जोडा </th>
                                        <th scope="col">लिंक</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% csrf_token %}
                                    {% for value in registration_media %}
                                    <tr>
                                        {% if scheme.url %}
                                        <td>
                                            <label name="{{value.name}}" value="{{value.name}}">{{value.name}}</label>
                                        </td>
                                        <td>
                                            {% if value.link %}
                                            <a href="" target="_blank"></a>
                                            {% endif %}
                                        </td>
                                        {%else%}
                                        <td>
                                            <label name="{{value.name}}" value="{{value.name}}">{{value.name}}</label>
                                        </td>
                                        <td>
                                            <input class="scheme_registration_media_file" type="file" name="{{value.name}}" />
                                        </td>
                                        {%endif%}
                                        {# fix: No text in achor tag below #}
                                        <td>
                                            {% if value.link %}
                                            <a href="{{ value.link }}" target="_blank">{{ value.link }}</a>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            </div>
                            {%endif%}
                            <div class="space"></div>
                            <p style= "font-family: 'Arya', sans-serif!important; text-align: center;"><input type="checkbox" data-toggle="modal" data-target="#staticBackdrop" required> I agree Terms & Condition</p>
                <!-- Modal -->
                <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="staticBackdropLabel" style="font-family: 'Arya', sans-serif!important;">Terms and condition</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body" style="font-family: 'Arya', sans-serif!important;">
                                कृपया माहिती अचूक भरा, अन्यथा तुमचा अर्ज नाकारला जाईल आणि तुम्ही योजनेचा लाभ घेऊ शकणार नाही.
                            </div>
                            <div class="modal-footer">
                                <button style="background-color:Green; font-family: 'Arya', sans-serif!important; border-color:blue; color:white" type="button" class="btn btn-secondary" data-dismiss="modal">I Agree</button>
                            </div>
                        </div>
                    </div>
                </div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-4"></div>
                                    <div class="col-md-4">
                                        <input type="submit" value="अर्ज करा"  name="myButton"
                                            class="btn btn-block rounded-0 white-color fables-main-hover-background-color fables-second-background-color font-16 semi-font"
                                            style="color: #fff; font-size: 20px; font-family: 'Arya', sans-serif!important;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- <h2 class="fables-second-text-color mt-3 font-30 font-weight-bold" style="color: #3f42a1; font-size: 35px">
                अर्जासोबत जोडायची कागदपत्रांची यादी
            </h2>
            <br />

            <table class="table table-bordered table-striped table-hover" style="font-size: 20px">
                <thead>
                    <tr>
                        <th scope="col" style="width: 130px">अनु. क्रमांक</th>
                        <th scope="col">माहिती</th>
                        <th scope="col">लिंक</th>
                    </tr>
                </thead>
                <tbody>
                    {% for doc in scheme.scheme_documents.all %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ doc.name }}</td>
                        {% if doc.link %}
                        <td><a href="{{ doc.link }}" target="_blank">{{ doc.link }}</a></td>
                        {% else %}
                        <td><a href="{{ doc.link }}" target="_blank"></a></td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table> -->
            <br />
        </div>
    </div>
</div>
</div>

<script>
    var uploadfield = document.getElementsByClassName("scheme_registration_media_file");
    for (var i = 0; i < uploadfield.length; i++) {
      uploadfield[i].onchange = function() {
        if (this.files[0].size > 100*1024) {
          alert("File too Big, please select a file less than 100KB");
          this.value = "";
        }
      }
    }
</script>

{% endblock %} {% block post_load_js %}
<!-- <script>
    $('.scheme_registration_media_select_options').change(function() {
      $(this).closest('tr').find('.scheme_registration_media_file').prop("name",$('option:selected', this).data('key'));;
    });
</script> -->
{% with 'forms/'|add:scheme.name|add:'.html' as form_template %}
{%if form_template|template_exists %}
<script src="{%static 'web/form-control.js'%}" type="module"></script>
{% endif %}
{% endwith %}
{% endblock%}
